(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7097:(e,t,s)=>{Promise.resolve().then(s.bind(s,7618))},7618:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(5155);s(1807);var r=s(2115),l=s(4298),n=s(1352);let i=(0,l.io)("https://api.erica.sailinhtut.dev");function o(){let[e,t]=(0,r.useState)(""),[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),c=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e,t;g(),d(localStorage.getItem("username"));let s=new n.O().getResult();return u(null!=(t=null!=(e=s.device.model)?e:s.os.name)?t:""),i.on("message",e=>{let t=JSON.parse(e);l(e=>[...e,t])}),i.on("getMessages",e=>{l(JSON.parse(e)),setTimeout(()=>p(!0),300)}),i.emit("getMessages"),()=>{i.off("message"),i.off("getMessages")}},[]);let g=()=>{let e=localStorage.getItem("username");if(!e){let e=prompt("Enter Username (Required):");e?localStorage.setItem("username",e):g()}d(e)},x=()=>{let e=prompt("Update Username:",o);e&&(localStorage.setItem("username",e),d(e))},h=e=>new Date(e).toLocaleTimeString(),p=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null==(e=c.current)||e.scrollIntoView({behavior:t?"instant":"smooth"})},f=()=>{let s=localStorage.getItem("username");s||g();let a={id:Date.now().toString(36)+Math.random().toString(36).substr(2),userId:navigator.userAgent,userName:s,deviceName:m,time:new Date().toISOString(),message:e};i.emit("message",JSON.stringify(a)),t(""),setTimeout(()=>p(),300)},b=e=>{if(e.userId!==navigator.userAgent)return void alert("You cannot delete this message. It is owned by "+e.userId);i.emit("deleteMessage",e.userId,e.id),l(t=>t.filter(t=>t.id!==e.id)),setTimeout(()=>alert("".concat(e.message," deleted successfully")),500)};return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"bg-white drop-shadow h-[50px] flex items-center justify-center border-b border-b-gray-300 fixed top-0 left-0 right-0",children:(0,a.jsxs)("div",{className:"w-full px-5 flex flex-row justify-between",children:[(0,a.jsx)("p",{className:"font-bold w-fit",children:"\uD83C\uDF08 Erica Chat..."}),(0,a.jsx)("div",{className:"text-sm text-blue-800 font-semibold cursor-pointer",onClick:()=>{x()},children:o})]})}),(0,a.jsx)("p",{children:s.length}),0!==s.length&&(0,a.jsxs)("div",{className:"m-3 mt-[50px] mb-[100px]",children:[s.map((e,t)=>{var s;return(0,a.jsxs)("p",{className:"w-fit py-1.5 px-3 bg-gray-100 border border-gray-300 rounded mt-3",children:[e.message,(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs text-slate-500",children:e.userName}),(0,a.jsxs)("span",{className:"ml-2 text-xs text-slate-500",children:[h(e.time),e.deviceName?" - ":"",null!=(s=e.deviceName)?s:""]}),(0,a.jsx)("span",{className:"ml-3 text-xs text-slate-400 hover:text-red-500 active:text-red-800 cursor-pointer",onClick:()=>b(e),children:"Remove"})]})]},t)}),(0,a.jsx)("div",{ref:c,className:"w-[50px]"})]}),(0,a.jsxs)("div",{className:"flex flex-row bg-white p-3 border-t border-t-gray-300 fixed bottom-0 left-0 right-0",children:[(0,a.jsx)("input",{value:e,placeholder:"Type a message",className:"w-full bg-gray-100 shadow py-1 mr-3 rounded-lg border border-gray-300 px-3",multiple:!0,onChange:e=>t(e.target.value),onKeyDown:t=>{"Enter"===t.key&&!t.shiftKey&&(t.preventDefault(),e&&f())}}),(0,a.jsx)("button",{onClick:()=>e?f():null,className:"".concat(e?"bg-blue-800 hover:bg-blue-900 active:bg-blue-800":"bg-gray-500"," rounded px-3 py-1 shadow-sm text-white  "),children:"Send"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[635,441,684,358],()=>t(7097)),_N_E=e.O()}]);